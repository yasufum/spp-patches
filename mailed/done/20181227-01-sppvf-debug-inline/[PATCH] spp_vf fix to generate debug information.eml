From - Fri Dec 28 10:48:02 2018
X-Account-Key: account1
X-UIDL: 00008fc856a584ea
X-Mozilla-Status: 0001
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Return-Path: <x-fn-spp@sl.ntt-tx.co.jp>
X-Original-To: yo128@mail2.ecl.ntt.co.jp
Delivered-To: yo128@mail2.ecl.ntt.co.jp
Received: from dmail1.ecl.ntt.co.jp (dmail1.ecl.ntt.co.jp [129.60.86.151])
	by jcms-pop21.ecl.ntt.co.jp (Postfix) with ESMTP id 1E6BC400D08
	for <yo128@mail2.ecl.ntt.co.jp>; Thu, 27 Dec 2018 18:05:17 +0900 (JST)
Received: by dmail1.ecl.ntt.co.jp (Postfix)
	id 1CED123BD72; Thu, 27 Dec 2018 18:05:17 +0900 (JST)
Delivered-To: ogawa.yasufumi@lab.ntt.co.jp
Received: from vc2.ecl.ntt.co.jp (vc2.ecl.ntt.co.jp [129.60.86.154])
	by dmail1.ecl.ntt.co.jp (Postfix) with ESMTP id 1C39D23BAB9
	for <ogawa.yasufumi@lab.ntt.co.jp>; Thu, 27 Dec 2018 18:05:17 +0900 (JST)
Received: from vc2.ecl.ntt.co.jp (localhost [127.0.0.1])
	by vc2.ecl.ntt.co.jp (Postfix) with ESMTP id 0D9606391D4
	for <ogawa.yasufumi@lab.ntt.co.jp>; Thu, 27 Dec 2018 18:05:17 +0900 (JST)
Received: from dcma-spm01.ecl.ntt.co.jp (unknown [129.60.87.149])
	by vc2.ecl.ntt.co.jp (Postfix) with ESMTP id 01EB2638EC1
	for <ogawa.yasufumi@lab.ntt.co.jp>; Thu, 27 Dec 2018 18:05:17 +0900 (JST)
Authentication-Results: dcma-spm01.ecl.ntt.co.jp; spf=Pass smtp.pra=x-fn-spp@sl.ntt-tx.co.jp; spf=Pass smtp.mailfrom=x-fn-spp@sl.ntt-tx.co.jp
Received-SPF: Pass (dcma-spm01.ecl.ntt.co.jp: domain of
  x-fn-spp@sl.ntt-tx.co.jp designates 210.232.35.69 as
  permitted sender) identity=pra; client-ip=210.232.35.69;
  receiver=dcma-spm01.ecl.ntt.co.jp;
  envelope-from="x-fn-spp@sl.ntt-tx.co.jp";
  x-sender="x-fn-spp@sl.ntt-tx.co.jp";
  x-conformance=sidf_strict; x-record-type="v=spf1";
  x-record-text="v=spf1 a:mail03.ics.ntt-tx.co.jp
  a:mail04.ics.ntt-tx.co.jp a:mail05.ics.ntt-tx.co.jp
  a:mail06.ics.ntt-tx.co.jp a:mail07.ics.ntt-tx.co.jp
  a:mail08.ics.ntt-tx.co.jp ip4:210.232.35.195
  ip4:210.232.35.196 ip4:210.232.35.65 ip4:210.232.35.66 ~all"
Received-SPF: Pass (dcma-spm01.ecl.ntt.co.jp: domain of
  x-fn-spp@sl.ntt-tx.co.jp designates 210.232.35.69 as
  permitted sender) identity=mailfrom; client-ip=210.232.35.69;
  receiver=dcma-spm01.ecl.ntt.co.jp;
  envelope-from="x-fn-spp@sl.ntt-tx.co.jp";
  x-sender="x-fn-spp@sl.ntt-tx.co.jp";
  x-conformance=sidf_strict; x-record-type="v=spf1";
  x-record-text="v=spf1 a:mail03.ics.ntt-tx.co.jp
  a:mail04.ics.ntt-tx.co.jp a:mail05.ics.ntt-tx.co.jp
  a:mail06.ics.ntt-tx.co.jp a:mail07.ics.ntt-tx.co.jp
  a:mail08.ics.ntt-tx.co.jp ip4:210.232.35.195
  ip4:210.232.35.196 ip4:210.232.35.65 ip4:210.232.35.66 ~all"
IronPort-PHdr: =?us-ascii?q?9a23=3AJCs9VRyMJ4R0EQ7XCy+N+z0kezQntrPoPwUc9p?=
 =?us-ascii?q?sgjfd0f7+++4j5ZRWAt/lmiVaMRp3es6sChuHS9ab8RSoL5tCDqCNKa4RCAi?=
 =?us-ascii?q?cMkt5ehAk8GIidE0SuPLvkaWkhBNxqT1sj+W2ndFRFXs35IV/K8TWp9TBHIh?=
 =?us-ascii?q?zkLkJuI/jtXIvbjsC5zee3ro2WbQMNnyKlSah2ahOqsUDNpo8dhs1gMv9rmC?=
 =?us-ascii?q?HEqXZJZelagFhQCwzLwETE79yrtN5v+CFZ/uk58pYZF6jxe+I+UaAeBzNgMX?=
 =?us-ascii?q?hnrMHssBDCS0OI6B5+Gi0G1xRORhPd9DnhWtH3rje/qvo70y7cP9W+Qb0vWD?=
 =?us-ascii?q?uk5rtmU1ey0X9BbWVjtjqKzJIhxKtAxXDp7wRy2YvVfJ2YOLJlc6XRcMlbDW?=
 =?us-ascii?q?tNU8BNVjBQV5umZthHBO4AMOBE6ojl8gFX9V3kXlPqX76plG4b4x2+lbc32O?=
 =?us-ascii?q?kgDwzciQArGttLq2zR9IyzOawWF+ap0O/DynPBd6Azu3+15Y7WfxQmufzJU6?=
 =?us-ascii?q?h3dJ+b2QwhEUbelk24soijOS+Jk/gd9WOcqeh4H7HK6SZvu0Rqrz6jy915wJ?=
 =?us-ascii?q?mMiIRQ0Ujc3T59hoApOZikWAhwZpimCNED0kPSf5szScQkTWZyvS88wbBTop?=
 =?us-ascii?q?+3ch8R1I4mzAKMI+zCaYWD5QjvEfqAOTotzmwwY6qx3lzhlCrogv25TMS/10?=
 =?us-ascii?q?xG6zZIgsWZ/G5YzATds4COGP50/0P5gnCO3BuV7P1YZFwk06HcbZw5p9x43p?=
 =?us-ascii?q?NBtE3CGneq3kT9l+mQallh5vju4OOhYK2ur82ZPo5w0ly4M6813MqjHaEkIk?=
 =?us-ascii?q?4FWC6Z4YHenPXqr0jwQbES0Ls3mbKftozGYNgL4KW+RQ1Nmo9x7h++C2/5lt?=
 =?us-ascii?q?UThj8BME4AZALBhI+vOUmrQriwBKW6ilWoyGctxvvdeLv9HtDRPj7Il/HjZf?=
 =?us-ascii?q?588xIOklNri4oEvdQPV/dYca+WOAe5tcSEXEVga0rumLyhU4g7j9JAEWOXXv?=
 =?us-ascii?q?3DafuU6wTSoLlyZbfRLI4N5GSncqBjvaW0yyRk3wFDNb+g2Z9dMSrqJPltLk?=
 =?us-ascii?q?SHbHapue8vTz5Q7DI3V/eiyFGJVDcWfG63B/t66zo/ToS6EcHIQcavmO7J0C?=
 =?us-ascii?q?C+F5xQLmdIbzLEWWeteYPBQO8UQDmWZMl9jnkYRf6qTMkjzVmiuRT7xLxuMu?=
 =?us-ascii?q?fPsndB7dS5j4IzvLCVy0B6/CcRbYzVy2yXSmBogm4EDyQ72qxyuw01y1uO17?=
 =?us-ascii?q?R5n+0NENVS4/1TVQJpfZXYzuF8F5XzQlebJ4/PEg38BI77R29gHbdTi5cUbk?=
 =?us-ascii?q?1wGsuvlEXP1C+jRqQNkuTSQpE/9uTaw2S3LME7yW6Vsctpx1QgXMZLMnWrw6?=
 =?us-ascii?q?Bl8A2GTZ6MnUPcjL6yXb8YmijR6CKf3SyFuwdaSEQjNMeNFWBafUbQodnjsw?=
 =?us-ascii?q?nSCrGoTK8/KiNazYiENrcPds2vhlIARu+pa7G8Kyqh3my3AxiP3LaFaoHnLn?=
 =?us-ascii?q?4c0CvqE1QekgsPrj6WcBIzDSC7ryfCHSRjQBjxNlj0/7A0+xbZBgckihuHZE?=
 =?us-ascii?q?p72/+p9w4J0LaCHugL0OtMsXUkojRwRA373tnNTdycu099bONXZpU/+DIlnS?=
 =?us-ascii?q?rQ5Ql0P5j4c+ZjjUVYdRhr+l/+kR5wTIdY2cF4qXoryFIvb6OTyxVHay/dwY?=
 =?us-ascii?q?C2MbqRKHGXnljnYvzT01DaiIjQ+6wUrvIktxD/rEeiEQwg6z1ugdxc0n/Eud?=
 =?us-ascii?q?PLBxFUV47tF1onsRN94bPCB0t1r4qG0HRtNfHk9D7JwJQvGPdg1gbmdNAZMr?=
 =?us-ascii?q?vMFReuQZdDX470c7ZswAXvN0NZWYIavK8sY5H8LqPAgvXxer092mv30yxG+N?=
 =?us-ascii?q?wviBvUsXAnEKiTgtBbnrmZxlfVDW6kyg366IasxMYaO3kEF267g3G1Vr4UXb?=
 =?us-ascii?q?V7eMMwMUnrJsS2wttkgJu0BCxD8BilG09DxN/vch3UbUSvhFQMh3RSmmSunG?=
 =?us-ascii?q?6D9xIxiysg9/XNxyiIxfj+MQYXfGVMAmt63w7h?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ACAABelSRch0Uj6NJjGgEBAQEBAgE?=
 =?us-ascii?q?BAQEHAgEBAQGBUgQBAQEBCwGCAIE4IQMHCCeMdqUCgXuEeTeCLAEFMAgNAQM?=
 =?us-ascii?q?BAQIBAQEBFAEBAQgNCQgpL4ZKMAw0TxKDIoIBqECId4Esh36BfYRajwMChzU?=
 =?us-ascii?q?HiSaQaQmRaRiRZQEtiSySFwGCDIQsgicOCY4sMAEBATABjVEBAQ?=
X-SPF-Status: pass
Received: from mail05.ics.ntt-tx.co.jp (HELO mail04.ics.ntt-tx.co.jp) ([210.232.35.69])
  by dcma-spm01.ecl.ntt.co.jp with ESMTP; 27 Dec 2018 18:05:16 +0900
Received: from gwchk03.silk.ntt-tx.co.jp (gwchk03.silk.ntt-tx.co.jp [10.107.0.111])
	by mail04.ics.ntt-tx.co.jp (unknown) with ESMTP id wBR955PW021939;
	Thu, 27 Dec 2018 18:05:05 +0900
Received: (from root@localhost)
	by gwchk03.silk.ntt-tx.co.jp (unknown) id wBR954wP025481;
	Thu, 27 Dec 2018 18:05:04 +0900
Received: from gwchk.silk.ntt-tx.co.jp [10.107.0.110] 
	 by gwchk03.silk.ntt-tx.co.jp with ESMTP id UAA24839;
	 Thu, 27 Dec 2018 18:04:01 +0900
Received: from imss04.silk.ntt-tx.co.jp (localhost [127.0.0.1]) by imss04.silk.ntt-tx.co.jp (unknown) with ESMTP id wBR941Gu024671; Thu, 27 Dec 2018 18:04:01 +0900
Received: from mgate01.silk.ntt-tx.co.jp (smtp02.silk.ntt-tx.co.jp [10.107.0.37]) by imss04.silk.ntt-tx.co.jp (unknown) with ESMTP id wBR940SU024668; Thu, 27 Dec 2018 18:04:00 +0900
Message-Id: <201812270904.wBR940SU024668@imss04.silk.ntt-tx.co.jp>
Received: from localhost by mgate01.silk.ntt-tx.co.jp (unknown)
	id wBR940kq027532 ; Thu, 27 Dec 2018 18:04:00 +0900
From: x-fn-spp@sl.ntt-tx.co.jp
To: ferruh.yigit@intel.com, ogawa.yasufumi@lab.ntt.co.jp
Cc: spp@dpdk.org
Subject: [PATCH] spp_vf: fix to generate debug information
Date: Thu, 27 Dec 2018 18:04:00 +0900
X-Mailer: git-send-email 2.18.0
X-TM-AS-MML: disable

From: Hideyuki Yamashita <yamashita.hideyuki@po.ntt-tx.co.jp>

This patch changes 'inline' declaration to 'static inline'or 'extern
inline' to be able to generate debug information.

Signed-off-by: Hideyuki Yamashita <yamashita.hideyuki@po.ntt-tx.co.jp>
Signed-off-by: Naoki Takada <takada.naoki@lab.ntt.co.jp>
---
 src/vf/common/command_dec.c   | 4 ++--
 src/vf/common/spp_port.c      | 6 +++---
 src/vf/common/string_buffer.c | 4 ++--
 3 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/src/vf/common/command_dec.c b/src/vf/common/command_dec.c
index 5b6ffcf..b328ca8 100644
--- a/src/vf/common/command_dec.c
+++ b/src/vf/common/command_dec.c
@@ -212,7 +212,7 @@ spp_convert_component_type(const char *type_str)
 }
 
 /* set decode error */
-inline int
+static inline int
 set_decode_error(struct spp_command_decode_error *error,
 		const int error_code, const char *error_name)
 {
@@ -225,7 +225,7 @@ set_decode_error(struct spp_command_decode_error *error,
 }
 
 /* set decode error */
-inline int
+static inline int
 set_string_value_decode_error(struct spp_command_decode_error *error,
 		const char *value, const char *error_name)
 {
diff --git a/src/vf/common/spp_port.c b/src/vf/common/spp_port.c
index d7d374e..fd76d79 100644
--- a/src/vf/common/spp_port.c
+++ b/src/vf/common/spp_port.c
@@ -57,7 +57,7 @@ spp_port_ability_init(void)
 }
 
 /* Get information of port ability. */
-inline void
+extern inline void
 spp_port_ability_get_info(
 		int port_id, enum spp_port_rxtx rxtx,
 		struct spp_port_ability **info)
@@ -365,7 +365,7 @@ port_ability_each_operation(uint16_t port_id,
 }
 
 /* Wrapper function for rte_eth_rx_burst(). */
-inline uint16_t
+extern inline uint16_t
 spp_eth_rx_burst(
 		uint16_t port_id, uint16_t queue_id  __attribute__ ((unused)),
 		struct rte_mbuf **rx_pkts, const uint16_t nb_pkts)
@@ -387,7 +387,7 @@ spp_eth_rx_burst(
 }
 
 /* Wrapper function for rte_eth_tx_burst(). */
-inline uint16_t
+extern inline uint16_t
 spp_eth_tx_burst(
 		uint16_t port_id, uint16_t queue_id  __attribute__ ((unused)),
 		struct rte_mbuf **tx_pkts, uint16_t nb_pkts)
diff --git a/src/vf/common/string_buffer.c b/src/vf/common/string_buffer.c
index acf0f81..768dd3a 100644
--- a/src/vf/common/string_buffer.c
+++ b/src/vf/common/string_buffer.c
@@ -13,14 +13,14 @@
 #define RTE_LOGTYPE_SPP_STRING_BUFF RTE_LOGTYPE_USER1
 
 /* get message buffer capacity */
-inline size_t
+static inline size_t
 strbuf_get_capacity(const char *strbuf)
 {
 	return *((const size_t *)(strbuf - sizeof(size_t)));
 }
 
 /* re-allocate message buffer */
-inline char*
+static inline char*
 strbuf_reallocate(char *strbuf, size_t required_len)
 {
 	size_t new_cap = strbuf_get_capacity(strbuf) * 2;
-- 
2.17.1



