X-Account-Key: account4
X-UIDL: 0000888d56a584ea
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Return-Path: <x-fn-spp@sl.ntt-tx.co.jp>
X-Original-To: yo128@mail2.ecl.ntt.co.jp
Delivered-To: yo128@mail2.ecl.ntt.co.jp
Received: from dmail1.ecl.ntt.co.jp (dmail1.ecl.ntt.co.jp [129.60.86.151])
	by jcms-pop21.ecl.ntt.co.jp (Postfix) with ESMTP id 3B5CD400870
	for <yo128@mail2.ecl.ntt.co.jp>; Wed, 21 Nov 2018 10:41:32 +0900 (JST)
Received: by dmail1.ecl.ntt.co.jp (Postfix)
	id 3879923BAE6; Wed, 21 Nov 2018 10:41:32 +0900 (JST)
Delivered-To: ogawa.yasufumi@lab.ntt.co.jp
Received: from vc1.ecl.ntt.co.jp (vc1.ecl.ntt.co.jp [129.60.86.153])
	by dmail1.ecl.ntt.co.jp (Postfix) with ESMTP id 37DF423B857
	for <ogawa.yasufumi@lab.ntt.co.jp>; Wed, 21 Nov 2018 10:41:32 +0900 (JST)
Received: from vc1.ecl.ntt.co.jp (localhost [127.0.0.1])
	by vc1.ecl.ntt.co.jp (Postfix) with ESMTP id 2B86CEA7723
	for <ogawa.yasufumi@lab.ntt.co.jp>; Wed, 21 Nov 2018 10:41:32 +0900 (JST)
Received: from dcma-spm01.ecl.ntt.co.jp (unknown [129.60.87.149])
	by vc1.ecl.ntt.co.jp (Postfix) with ESMTP id 1E5A9EA77C6
	for <ogawa.yasufumi@lab.ntt.co.jp>; Wed, 21 Nov 2018 10:41:32 +0900 (JST)
Authentication-Results: dcma-spm01.ecl.ntt.co.jp; spf=Pass smtp.pra=x-fn-spp@sl.ntt-tx.co.jp; spf=Pass smtp.mailfrom=x-fn-spp@sl.ntt-tx.co.jp
Received-SPF: Pass (dcma-spm01.ecl.ntt.co.jp: domain of
  x-fn-spp@sl.ntt-tx.co.jp designates 210.232.35.69 as
  permitted sender) identity=pra; client-ip=210.232.35.69;
  receiver=dcma-spm01.ecl.ntt.co.jp;
  envelope-from="x-fn-spp@sl.ntt-tx.co.jp";
  x-sender="x-fn-spp@sl.ntt-tx.co.jp";
  x-conformance=sidf_strict; x-record-type="v=spf1";
  x-record-text="v=spf1 a:mail03.ics.ntt-tx.co.jp
  a:mail04.ics.ntt-tx.co.jp a:mail05.ics.ntt-tx.co.jp
  a:mail06.ics.ntt-tx.co.jp a:mail07.ics.ntt-tx.co.jp
  a:mail08.ics.ntt-tx.co.jp ip4:210.232.35.195
  ip4:210.232.35.196 ip4:210.232.35.65 ip4:210.232.35.66 ~all"
Received-SPF: Pass (dcma-spm01.ecl.ntt.co.jp: domain of
  x-fn-spp@sl.ntt-tx.co.jp designates 210.232.35.69 as
  permitted sender) identity=mailfrom; client-ip=210.232.35.69;
  receiver=dcma-spm01.ecl.ntt.co.jp;
  envelope-from="x-fn-spp@sl.ntt-tx.co.jp";
  x-sender="x-fn-spp@sl.ntt-tx.co.jp";
  x-conformance=sidf_strict; x-record-type="v=spf1";
  x-record-text="v=spf1 a:mail03.ics.ntt-tx.co.jp
  a:mail04.ics.ntt-tx.co.jp a:mail05.ics.ntt-tx.co.jp
  a:mail06.ics.ntt-tx.co.jp a:mail07.ics.ntt-tx.co.jp
  a:mail08.ics.ntt-tx.co.jp ip4:210.232.35.195
  ip4:210.232.35.196 ip4:210.232.35.65 ip4:210.232.35.66 ~all"
IronPort-PHdr: =?us-ascii?q?9a23=3AH1c1hBPH0nyiJCkcay0l6mtXPHoOpqn0MwgJ65?=
 =?us-ascii?q?Eul7NJdOGZ8o//OFDEvKwy3lPCWIye8OpB07OQvqvkH2oc/dCKtzYAaM8ETA?=
 =?us-ascii?q?cL3P0fhBdoG8uZEQvjNve/f2k0GoFZTEdN5HX9N1RJXdruIVbV5H+qvnYJAh?=
 =?us-ascii?q?uqDQNuPazuH5LKycG+1uS84ZrWNhUNijz4eqtqBA6y6wPNqowKkc1pLeAz0k?=
 =?us-ascii?q?KT8EFFcOlX225kYGmrsUikuZWI9YV4u2RcsPcostVYVP2jOakzSfpeEChgOG?=
 =?us-ascii?q?dz5tW5/RXESAKO4DMbXAB02lJYRgbDqQriRr/qtm38qvY4xDncNsqwT6h8VT?=
 =?us-ascii?q?m57qhtQQPlk29dbmZ/qjqNzJctyvwK6Bu6wn43i5bZeoSUKOZzcuvGcNUWSH?=
 =?us-ascii?q?AAFsddWipdA5+tOpMVBrlJNuJZoo/h4loW+EHnXU/2X7mpkWIO2C6luM9ym/?=
 =?us-ascii?q?4sGgzHwgE6St4FtX2Rt83wbP5UXOuxiq/U0XPIaLVUwWSYisCAfxY/rPWLRb?=
 =?us-ascii?q?81f9DWzBxlB0bLiBCLsZTNJDfT0PgR9nSLqeFnE+C3wT1CyUk5sn20y8Egh5?=
 =?us-ascii?q?OczJJQxFaB7j1h6J0xY9ukVAtncZivF91Sr2vJUuk+CtNnSGZutiEgz7QAsp?=
 =?us-ascii?q?PuZykGxqM82wTeYODUO5jN+B/oU/ydZCtpnH8wMqzqnA68qALzr4+0Htnxyl?=
 =?us-ascii?q?tBqTBJ18XBpmxYnQKG8dCJE7N0rEKo2DLXjEbS4foCJ1wo0LbLbZUmhLwo8/?=
 =?us-ascii?q?hb+U2RGyb3nB2qyq6dbQMi5vTt9/ShabKgpIfUPt1xgwD6avlom8ekR+IkLk?=
 =?us-ascii?q?0STy6Q/qK+zNiBtQXwErBDj/luzO/Yu4ucI9gH47KpRQRSlIQ7ox/tCj6n1I?=
 =?us-ascii?q?xH23gMNxRDZA7Ck5ivMFaIIuidb7/3igapmTZvn6CAP7b6RJPRMj3fgPHqev?=
 =?us-ascii?q?B/8wZd0FZhl4kHocgPUPdafbSqCxKU1pSQDwdlYVbtm6C9U487jd5YADPRSq?=
 =?us-ascii?q?6BbPGI6AfOvLl1ZbLRItFI8Dfld6p/vqao1yRj3wRAO/f3lY0ebHTyR640GU?=
 =?us-ascii?q?iSbHvyj9tEKl8k4FNkHtTjk0bKETJYYn/3RLo5vmh9BYmiS4HfWsamh/qDxH?=
 =?us-ascii?q?XzEppTb2FAQleCdBWgP5XBVfFJczqKCtRl1DoYSf29W8kq0lesrEf2xqFmIe?=
 =?us-ascii?q?zd5iAD/ci6jJ4vvLeVzkx0q208Bt/4sSnFV2xum2IUWzI6lLtyp0Bw0BbL0K?=
 =?us-ascii?q?R1heBZCc0G4vpIVgkgMpuPh+d+Ct30RkfAZoLTEQ7gGI78R2psCIxgkLpsKw?=
 =?us-ascii?q?5nFt6vjw7OxX+mCLoc0qeTAcRttK/X2z73O9o7wHGA1rFy6jtuCsZJK2Cigb?=
 =?us-ascii?q?ZysgbJAIuc2VXcmaDvbrwE9DXJsmGf0S+SrAdTV0hySe+WOBJXLluTttn/6k?=
 =?us-ascii?q?7YGvW+TLohdxBZ0eaZLu1MdsGskUUAT/ClOsyUMAfT0y+gQB2PwL2Ldo/jfW?=
 =?us-ascii?q?4QiT7cBEYziBwJ/H2aZkAuQz2sqGXEAHlyBEriNgnypPJmpirxHSpWh0maKl?=
 =?us-ascii?q?ds3L2v9lsJiOyAHrkNi6kctn5pomdxFVe5h4mQCtGb4Qx9YOBAcZU25xFFzQ?=
 =?us-ascii?q?e7/0R0bJmpLqQ62hgfeB8xuV/ykglnTI5H18oy5Hp4yQNzLfrFllJKbHWewY?=
 =?us-ascii?q?y1Jq2RIW60/gjKCeae0wPb2deSovlJ6f8j7VP/oES1Bgwp9DNly5FcgX6V55?=
 =?us-ascii?q?GSU0wTWom3VForsgRq4brdJCslguGcnXQ+NKC1tmeSndMiH60j1grlY8cZO6?=
 =?us-ascii?q?TCFhe6EtVGVZL3cKpwwALvNU9CZbEPkcx8d8K+K6ncgfbtZr062mn7yz0Wvs?=
 =?us-ascii?q?h8yh7erXMkDLSThdBenrfGg0OGT2uu1g759Jqsw8YfOHdMQCKpwCzgTtcANJ?=
 =?us-ascii?q?03Rp4CDCKVG+Pyw9x/g5D3XHsBqwy4AxUAxNPsZQrUZFu73xUCjB1L80zioj?=
 =?us-ascii?q?OxynlPqx9strCWhXOc2OCkcgYbf3JbAmJly1X0c9G5?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ABAAB/tvRbl0Uj6NJkGgEBAQEBAgE?=
 =?us-ascii?q?BAQEHAgEBAQGBUQUBAQEBCwGCAGlPIQMHCCeMEF+NLXqWPRSBZiyETQI1g2E?=
 =?us-ascii?q?BBS8JDQEDAQECAQEBARQBAQEBAQYYBkwMhT0DA3kQIAwlD0gHEoMhAYIAq1e?=
 =?us-ascii?q?IfoEsh1qBZ4RagRGCXYR4hXQiAocWB4d3EGaFJopHCYZ6ijAYgViFCYogLJl?=
 =?us-ascii?q?Bgg2ELAmCLIdyhkIwAQEBMAGOCQEB?=
X-SPF-Status: pass
Received: from mail05.ics.ntt-tx.co.jp (HELO mail04.ics.ntt-tx.co.jp) ([210.232.35.69])
  by dcma-spm01.ecl.ntt.co.jp with ESMTP; 21 Nov 2018 10:41:31 +0900
Received: from gwchk03.silk.ntt-tx.co.jp (gwchk03.silk.ntt-tx.co.jp [10.107.0.111])
	by mail04.ics.ntt-tx.co.jp (unknown) with ESMTP id wAL1fS74002954;
	Wed, 21 Nov 2018 10:41:28 +0900
Received: (from root@localhost)
	by gwchk03.silk.ntt-tx.co.jp (unknown) id wAL1fSFZ005024;
	Wed, 21 Nov 2018 10:41:28 +0900
Received: from gwchk.silk.ntt-tx.co.jp [10.107.0.110] 
	 by gwchk03.silk.ntt-tx.co.jp with ESMTP id LAA02037;
	 Wed, 21 Nov 2018 10:36:18 +0900
Received: from imss03.silk.ntt-tx.co.jp (localhost [127.0.0.1]) by imss03.silk.ntt-tx.co.jp (unknown) with ESMTP id wAL1aHBK009772; Wed, 21 Nov 2018 10:36:18 +0900
Received: from mgate02.silk.ntt-tx.co.jp (smtp02.silk.ntt-tx.co.jp [10.107.0.37]) by imss03.silk.ntt-tx.co.jp (unknown) with ESMTP id wAL1aHrQ009769; Wed, 21 Nov 2018 10:36:17 +0900
Message-Id: <201811210136.wAL1aHrQ009769@imss03.silk.ntt-tx.co.jp>
Received: from localhost by mgate02.silk.ntt-tx.co.jp (unknown)
	id wAL1aH1g008431 ; Wed, 21 Nov 2018 10:36:17 +0900
From: x-fn-spp@sl.ntt-tx.co.jp
To: ferruh.yigit@intel.com, ogawa.yasufumi@lab.ntt.co.jp
Cc: spp@dpdk.org
Subject: [PATCH 3/3] spp_mirror: add Makefile for spp_mirror
Date: Wed, 21 Nov 2018 10:36:17 +0900
X-Mailer: git-send-email 2.18.0
In-Reply-To: <20181121013617.8938-1-x-fn-spp@sl.ntt-tx.co.jp>
References: <20181121013617.8938-1-x-fn-spp@sl.ntt-tx.co.jp>
X-TM-AS-MML: disable

From: Hideyuki Yamashita <yamashita.hideyuki@po.ntt-tx.co.jp>

Add Makefile for spp_mirror.

Signed-off-by: Hideyuki Yamashita <yamashita.hideyuki@po.ntt-tx.co.jp>
Signed-off-by: Naoki Takada <takada.naoki@lab.ntt.co.jp>
---
 src/Makefile        |  1 +
 src/mirror/Makefile | 35 +++++++++++++++++++++++++++++++++++
 2 files changed, 36 insertions(+)
 create mode 100644 src/mirror/Makefile

diff --git a/src/Makefile b/src/Makefile
index d2eb9b6..01f8929 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -42,5 +42,6 @@ DIRS-$(CONFIG_RTE_EXEC_ENV_LINUXAPP) += nfv
 DIRS-$(CONFIG_RTE_EXEC_ENV_LINUXAPP) += primary
 DIRS-$(CONFIG_RTE_EXEC_ENV_LINUXAPP) += vm
 DIRS-$(CONFIG_RTE_EXEC_ENV_LINUXAPP) += vf
+DIRS-$(CONFIG_RTE_EXEC_ENV_LINUXAPP) += mirror
 
 include $(RTE_SDK)/mk/rte.extsubdir.mk
diff --git a/src/mirror/Makefile b/src/mirror/Makefile
new file mode 100644
index 0000000..a759ad2
--- /dev/null
+++ b/src/mirror/Makefile
@@ -0,0 +1,35 @@
+# SPDX-License-Identifier: BSD-3-Clause
+# Copyright(c) 2018 Nippon Telegraph and Telephone Corporation
+
+ifeq ($(RTE_SDK),)
+$(error "Please define RTE_SDK environment variable")
+endif
+
+# Default target, can be overridden by command line or environment
+include $(RTE_SDK)/mk/rte.vars.mk
+
+# binary name
+APP = spp_mirror
+
+# all source are stored in SRCS-y
+SRCS-y := spp_mirror.c
+SRCS-y += ../shared/common.c
+SRCS-y += ../vf/common/spp_proc.c ../vf/common/spp_port.c
+SRCS-y += ../vf/common/command_conn.c ../vf/common/command_proc.c
+SRCS-y += ../vf/common/command_dec.c
+SRCS-y += ../vf/common/ringlatencystats.c ../vf/common/string_buffer.c
+
+CFLAGS += $(WERROR_FLAGS) -O3
+CFLAGS += -I$(SRCDIR)/../shared
+CFLAGS += -I$(SRCDIR)/../vf/common
+CFLAGS += -DSPP_MIRROR_MODULE
+CFLAGS += -DSPP_MIRROR_SHALLOWCOPY
+#CFLAGS += -DSPP_DEMONIZE
+#CFLAGS += -DSPP_RINGLATENCYSTATS_ENABLE
+
+ifeq ($(CONFIG_RTE_BUILD_SHARED_LIB),y)
+LDLIBS += -lrte_pmd_ring
+LDLIBS += -lrte_pmd_vhost
+endif
+
+include $(RTE_SDK)/mk/rte.extapp.mk
-- 
2.18.0


